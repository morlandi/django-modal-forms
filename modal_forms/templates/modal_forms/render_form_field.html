{% load modal_forms_tags %}

{% if FORM_LAYOUT_FLAVOR == "generic" %}

    <div class="form-row {% if field.errors %}errors{% endif %} {{ field.html_name }}">
        <div>
            <div>
                <label {% if field.field.required %}class="required"{% endif %} for="{{ field.id_for_label }}">{{ field.label }}:</label>
            </div>
            <div>
                {{ field }}
                {% if field.help_text %}
                <p class="help">{{ field.help_text }}</p>
                {% endif %}
                {% if field.errors %}
                    <ul class="errorlist">
                        {% for error in field.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>
    </div>

    {% comment %}
    <div class="form-row grp-row grp-cells-1 {% if field.errors %}grp-errors{% endif %} {{ field.html_name }}">
        <div class="field-box l-2c-fluid l-d-4">
            <div class="c-1">
                <label {% if field.field.required %}class="required"{% endif %} for="{{ field.id_for_label }}">{{ field.label }}:</label>
            </div>
            <div class="c-2">
                {{ field }}
                {% if field.help_text %}
                <p class="grp-help">{{ field.help_text }}</p>
                {% endif %}
                {% if field.errors %}
                    <ul class="errorlist">
                        {% for error in field.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>
    </div>
    {% endcomment %}

{% elif FORM_LAYOUT_FLAVOR == "bs4" %}

    <div class="form-group {% if field.errors %}field-with-errors{% endif %} {{ field.html_name }}">
        <label {% if field.field.required %}class="required"{% endif %} for="{{ field.id_for_label }}">{{ field.label }}:</label>
        {% if field.errors %}
            {{ field|add_field_attrs:"class=form-control is-invalid" }}
            {% for error in field.errors %}
                <div class="invalid-tooltip">
                    {{ error }}
                </div>
            {% endfor %}
        {% else %}
            {{ field|add_field_attrs:"class=form-control is-valid" }}
        {% endif %}
        {% if field.help_text %}
            <small class="form-text text-muted">{{ field.help_text }}</small>
        {% endif %}
    </div>

{% else %}

    <h1>Unknow FORM_LAYOUT_FLAVOR: "{{ FORM_LAYOUT_FLAVOR }}"</h1>

{% endif %}
